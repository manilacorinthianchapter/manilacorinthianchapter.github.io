<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>404 - Page Not Found | UAP Manila Corinthian Chapter</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

  <style>
    body, html {
      height: 100%;
      margin: 0;
      background: #f8f9fa;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #333;
      padding: 20px;
      min-height: 100vh;
      user-select: none;
    }
    h1 {
      font-weight: 700;
      font-size: 2.4rem;
      margin-bottom: 0.5rem;
      text-align: center;
    }
    p.description {
      max-width: 480px;
      font-size: 1.15rem;
      margin-bottom: 1.5rem;
      text-align: center;
      color: #555;
    }
    a.btn-home {
      margin-bottom: 20px;
      font-weight: 600;
      font-size: 1.1rem;
      padding: 0.65rem 1.5rem;
      background-color: #007bff;
      border: none;
      color: white;
      border-radius: 0.375rem;
      text-decoration: none;
      transition: background-color 0.3s ease;
    }
    a.btn-home:hover, a.btn-home:focus {
      background-color: #0056b3;
      outline: none;
      text-decoration: none;
      color: white;
    }

    /* Controls container */
    #controls {
      margin-bottom: 15px;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      user-select: none;
    }
    #controls label {
      font-weight: 600;
      font-size: 1rem;
      user-select: none;
    }
    select, button {
      font-size: 1rem;
      padding: 6px 12px;
      border-radius: 0.375rem;
      border: 1px solid #ccc;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.25s ease;
    }
    select:focus, button:focus {
      outline: 2px solid #0056b3;
      outline-offset: 2px;
    }
    button {
      background-color: #007bff;
      color: white;
      border: none;
      font-weight: 600;
      min-width: 120px;
    }
    button:hover {
      background-color: #0056b3;
    }

    /* Scoreboard */
    #scoreboard {
      margin-bottom: 15px;
      font-size: 1.15rem;
      font-weight: 600;
      color: #333;
      user-select: none;
    }

    /* Game board container */
    #game-container {
      background: white;
      border: 3px solid #365f9f;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(54, 95, 159, 0.6);
      display: grid;
      max-width: 640px;
      max-height: 640px;
      width: 100%;
      aspect-ratio: 1;
      user-select: none;
      touch-action: manipulation;
    }

    /* Grid cells */
    .cell {
      border: 1px solid #97a9d9;
      background: #a8b9ef;
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 12px;
      cursor: pointer;
      user-select: none;
      position: relative;
      transition: background-color 0.15s ease;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    .cell.revealed {
      background: #e4e9fc;
      border-color: #7d89be;
      cursor: default;
      color: #222;
      font-weight: 700;
      user-select: text;
    }
    .cell.flagged::after {
      content: "üö©";
      font-size: 14px;
      position: absolute;
      top: 1px;
      left: 1px;
      user-select: none;
      pointer-events: none;
    }
    .cell.mine::after {
      content: "üí£";
      font-size: 14px;
      user-select: none;
      pointer-events: none;
    }

    /* Numbers colors */
    .num-1 { color: #0000FF; }
    .num-2 { color: #007700; }
    .num-3 { color: #FF0000; }
    .num-4 { color: #000077; }
    .num-5 { color: #770000; }
    .num-6 { color: #007777; }
    .num-7 { color: #000000; }
    .num-8 { color: #777777; }

    /* Explosion overlay */
    #explosion {
      position: fixed;
      pointer-events: none;
      top: 50%; left: 50%;
      width: 150vw;
      height: 150vh;
      transform: translate(-50%, -50%);
      background: radial-gradient(circle at center, rgba(255, 69, 0, 0.9), transparent 60%);
      opacity: 0;
      animation: none;
      z-index: 9999;
      border-radius: 50%;
      box-shadow:
        0 0 80px 40px rgba(255, 69, 0, 0.6),
        0 0 120px 70px rgba(255, 140, 0, 0.5),
        0 0 200px 120px rgba(255, 200, 0, 0.3);
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    @keyframes explode {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(0.3);
      }
      50% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(2.5);
      }
    }
  </style>
</head>
<body>

  <h1>Oops! This page is still under construction.</h1>

  <p class="description">
    Much like an unapproved blueprint, this page hasn't made it past the drawing board yet.<br/>
    While we fix it, try clearing the construction site in this Minesweeper game!
  </p>

  <a href="index.html" class="btn-home" aria-label="Go back to homepage">üè† Come back Home</a>

  <div id="controls" role="region" aria-label="Game controls">
    <label for="size-select">Select Grid Size:</label>
    <select id="size-select" aria-describedby="size-desc">
      <option value="10">Small (10x10)</option>
      <option value="15">Medium (15x15)</option>
      <option value="20" selected>Large (20x20)</option>
    </select>
    <span id="size-desc" class="visually-hidden">Choose the size of the Minesweeper grid</span>

    <button id="reset-btn" aria-label="Reset Minesweeper game">Reset Game</button>
  </div>

  <div id="scoreboard" aria-live="polite" aria-atomic="true">
    Score: <span id="score">0</span> | High Score: <span id="highscore">0</span>
  </div>

  <div id="game-container" role="grid" aria-label="Minesweeper game grid" tabindex="0"></div>

  <div id="explosion" aria-hidden="true"></div>

<script>
  const gameContainer = document.getElementById('game-container');
  const resetBtn = document.getElementById('reset-btn');
  const sizeSelect = document.getElementById('size-select');
  const scoreSpan = document.getElementById('score');
  const highScoreSpan = document.getElementById('highscore');
  const explosion = document.getElementById('explosion');

  let rows = 20;
  let cols = 20;
  let mineDensity = 0.15; // 15% mines

  let board = [];
  let revealedCount = 0;
  let flaggedCount = 0;
  let gameOver = false;
  let totalMines = 0;

  // Load high score from localStorage
  function loadHighScore() {
    return Number(localStorage.getItem('minesweeperHighScore') || '0');
  }
  function saveHighScore(score) {
    localStorage.setItem('minesweeperHighScore', score);
  }

  highScoreSpan.textContent = loadHighScore();

  function createBoard() {
    board = [];
    gameContainer.innerHTML = '';
    revealedCount = 0;
    flaggedCount = 0;
    gameOver = false;

    rows = cols = parseInt(sizeSelect.value);

    gameContainer.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
    gameContainer.style.gridTemplateRows = `repeat(${rows}, 1fr)`;

    // Create board data & elements
    for (let r = 0; r < rows; r++) {
      board[r] = [];
      for (let c = 0; c < cols; c++) {
        const cell = {
          mine: Math.random() < mineDensity,
          revealed: false,
          flagged: false,
          adjacentMines: 0,
          element: null,
        };
        board[r][c] = cell;
      }
    }

    // Count adjacent mines
    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
        if (!board[r][c].mine) {
          board[r][c].adjacentMines = countAdjacentMines(r, c);
        }
      }
    }

    // Count total mines
    totalMines = board.flat().filter(cell => cell.mine).length;

    // Create DOM elements
    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
        const div = document.createElement('div');
        div.className = 'cell';
        div.setAttribute('role', 'gridcell');
        div.setAttribute('tabindex', '-1');
        div.dataset.row = r;
        div.dataset.col = c;

        // Left click = reveal
        div.addEventListener('click', () => revealCell(r, c));
        // Right click = flag
        div.addEventListener('contextmenu', e => {
          e.preventDefault();
          flagCell(r, c);
        });

        board[r][c].element = div;
        gameContainer.appendChild(div);
      }
    }
    updateScore(0);
  }

  function countAdjacentMines(r, c) {
    let count = 0;
    for (let dr = -1; dr <= 1; dr++) {
      for (let dc = -1; dc <= 1; dc++) {
        if (dr === 0 && dc === 0) continue;
        const nr = r + dr;
        const nc = c + dc;
        if (nr >= 0 && nr < rows && nc >= 0 && nc < cols) {
          if (board[nr][nc].mine) count++;
        }
      }
    }
    return count;
  }

  function revealCell(r, c) {
    if (gameOver) return;
    const cell = board[r][c];
    if (cell.revealed || cell.flagged) return;

    cell.revealed = true;
    cell.element.classList.add('revealed');

    if (cell.mine) {
      cell.element.classList.add('mine');
      gameOver = true;
      showExplosion();
      setTimeout(() => alert('üí• BOOM! You hit a mine! Game Over.'), 10);
      revealAllMines();
      return;
    }

    revealedCount++;
    updateScore(revealedCount);

    if (cell.adjacentMines > 0) {
      cell.element.textContent = cell.adjacentMines;
      cell.element.classList.add(`num-${cell.adjacentMines}`);
    } else {
      // Recursive reveal neighbors
      for (let dr = -1; dr <= 1; dr++) {
        for (let dc = -1; dc <= 1; dc++) {
          const nr = r + dr;
          const nc = c + dc;
          if (nr >= 0 && nr < rows && nc >= 0 && nc < cols) {
            if (!board[nr][nc].revealed) revealCell(nr, nc);
          }
        }
      }
    }

    checkWin();
  }

  function flagCell(r, c) {
    if (gameOver) return;
    const cell = board[r][c];
    if (cell.revealed) return;

    cell.flagged = !cell.flagged;
    if (cell.flagged) {
      cell.element.classList.add('flagged');
      flaggedCount++;
    } else {
      cell.element.classList.remove('flagged');
      flaggedCount--;
    }
  }

  function revealAllMines() {
    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
        const cell = board[r][c];
        if (cell.mine) {
          cell.element.classList.add('revealed', 'mine');
          cell.element.textContent = "üí£";
        }
      }
    }
  }

  function checkWin() {
    if (revealedCount === rows * cols - totalMines) {
      alert('üéâ Congratulations! You cleared the construction site!');
      gameOver = true;
      revealAllMines();
      updateHighScore(revealedCount);
    }
  }

  function updateScore(score) {
    scoreSpan.textContent = score;
    if (score > loadHighScore()) updateHighScore(score);
  }

  function loadHighScore() {
    return Number(localStorage.getItem('minesweeperHighScore') || '0');
  }
  function updateHighScore(score) {
    if (score > loadHighScore()) {
      localStorage.setItem('minesweeperHighScore', score);
      highScoreSpan.textContent = score;
    }
  }

  function showExplosion() {
    explosion.style.animation = 'none';
    explosion.offsetHeight; // Trigger reflow
    explosion.style.animation = 'explode 1.5s forwards';
  }

  resetBtn.addEventListener('click', createBoard);
  sizeSelect.addEventListener('change', createBoard);

  // Initialize game on load
  createBoard();

  // Keyboard accessibility - focus game container
  gameContainer.tabIndex = 0;
</script>

</body>
</html>
