<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
  {% include head.html %}

</head>
<body>
  {% include header.html %}

  <!-- Back-to-top anchor -->
  <div id="top"></div>

  <div id="mainContent" class="container-fluid px-0">
    <article class="container py-5" data-aos="fade-up">
      <h1 class="mb-3">{{ page.title }}</h1>
      <p class="text-muted">
        {{ page.date | date: "%B %-d, %Y" }}
        {% if page.location %}&mdash; {{ page.location }}{% endif %}
      </p>

      {% if page.cover %}
        <img src="{{ page.cover | relative_url }}"
             class="img-fluid mb-4"
             alt="{{ page.title }}">
      {% endif %}

      <!-- Render description from front matter -->
      <div class="content mb-4">
        {{ page.data.content | markdownify }}
      </div>

      {% if page.registration_url %}
        <a href="{{ page.registration_url }}"
           class="btn btn-primary me-2"
           target="_blank">
          Register
        </a>
      {% endif %}

      {% if page.map_embed %}
        <div class="map-responsive mb-4">
          {{ page.map_embed | raw }}
        </div>
      {% endif %}

      {% comment %} Navigation using the events collection {% endcomment %}
      {% assign slugs    = site.events | map: "slug" %}
      {% assign idx      = slugs | index_of: page.slug %}
      {% assign prev_idx = idx | minus: 1 %}
      {% assign next_idx = idx | plus: 1 %}
      {% assign last_idx = site.events | size | minus: 1 %}

      <div class="d-flex justify-content-between mt-5 event-navigation">
        {% if prev_idx >= 0 %}
          {% assign prev = site.events[prev_idx] %}
          <a href="{{ prev.url }}" class="btn btn-outline-primary">
            ← {{ prev.title }}
          </a>
        {% else %}
          <span></span>
        {% endif %}

        {% if idx < last_idx %}
          {% assign nxt = site.events[next_idx] %}
          <a href="{{ nxt.url }}" class="btn btn-outline-primary">
            {{ nxt.title }} →
          </a>
        {% endif %}
      </div>
    </article>
  </div>

  {% include footer.html %}
  {% include scripts.html %}

  <!-- Back to Top Button -->
  <a id="btnTop" href="#top" class="btn btn-secondary shadow" aria-label="Back to top">
    <i class="fa-solid fa-arrow-up"></i>
  </a>
</body>
</html>
